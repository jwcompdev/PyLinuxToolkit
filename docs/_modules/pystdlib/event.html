
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pystdlib.event &#8212; PyLinuxToolkit &amp; PyStdLib Documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">PyLinuxToolkit & PyStdLib Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python API
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../pylinuxtoolkit.html">
   pylinuxtoolkit package
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../pylinuxtoolkit.rpi.html">
     pylinuxtoolkit.rpi package
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../pystdlib.html">
   pystdlib package
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../pystdlib.bash.html">
     pystdlib.bash package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../pystdlib.introspection.html">
     pystdlib.introspection package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../pystdlib.values.html">
     pystdlib.values package
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <p>By JWCompDev<br />Â© Copyright 2022.</p>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/jwcompdev/PyLinuxToolkit"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/jwcompdev/PyLinuxToolkit/issues/new?title=Issue%20on%20page%20%2F_modules/pystdlib/event.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                
  <h1>Source code for pystdlib.event</h1><div class="highlight"><pre>
<span></span><span class="c1"># PyLinuxToolkit</span>
<span class="c1"># Copyright (C) 2022 JWCompDev</span>
<span class="c1">#</span>
<span class="c1"># event.py</span>
<span class="c1"># Copyright (C) 2022 JWCompDev &lt;jwcompdev@gmail.com&gt;</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation; either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Contains the Event class and the classes that support it.</span>

<span class="sd">The event class is a heavily modified version of &#39;pymitter&#39;</span>
<span class="sd">written by &#39;Marcel R.&#39; which was originally distributed</span>
<span class="sd">under the &#39;BSD 3-Clause &quot;New&quot; or &quot;Revised&quot; License&#39; and</span>
<span class="sd">can be found here: (https://github.com/riga/pymitter).</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">Parameter</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">NoReturn</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pystdlib</span> <span class="kn">import</span> <span class="n">Chars</span>
<span class="kn">from</span> <span class="nn">pystdlib.introspection</span> <span class="kn">import</span> <span class="n">Func</span><span class="p">,</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">Caller</span>
<span class="kn">from</span> <span class="nn">pystdlib.logged</span> <span class="kn">import</span> <span class="n">Logged</span>
<span class="kn">from</span> <span class="nn">pystdlib.str_utils</span> <span class="kn">import</span> <span class="n">is_blank</span><span class="p">,</span> <span class="n">is_not_blank</span><span class="p">,</span> <span class="n">build_repr</span>
<span class="kn">from</span> <span class="nn">pystdlib.types</span> <span class="kn">import</span> <span class="n">is_subclass</span>
<span class="kn">from</span> <span class="nn">pystdlib.values</span> <span class="kn">import</span> <span class="n">StringValue</span>


<div class="viewcode-block" id="EventError"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.EventError">[docs]</a><span class="k">class</span> <span class="nc">EventError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base Event error.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="EventSignatureError"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.EventSignatureError">[docs]</a><span class="k">class</span> <span class="nc">EventSignatureError</span><span class="p">(</span><span class="n">EventError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The EventSignatureError.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="EventHandlerMismatchError"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.EventHandlerMismatchError">[docs]</a><span class="k">class</span> <span class="nc">EventHandlerMismatchError</span><span class="p">(</span><span class="n">EventError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The EventHandlerMismatchError.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="EventFireMismatchError"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.EventFireMismatchError">[docs]</a><span class="k">class</span> <span class="nc">EventFireMismatchError</span><span class="p">(</span><span class="n">EventError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The EventFireMismatchError.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="Namespace"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Namespace">[docs]</a><span class="k">class</span> <span class="nc">Namespace</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an event namespace that when iterated over</span>
<span class="sd">    gives you the individual parts split by the specified</span>
<span class="sd">    delimiter which defaults to &quot;.&quot; if not specified.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_CB_KEY</span> <span class="o">=</span> <span class="s2">&quot;__callbacks&quot;</span>
    <span class="n">_NO_NAME</span> <span class="o">=</span> <span class="s2">&quot;_NO_NAME&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the Namespace object.</span>

<span class="sd">        :param name: the name of the namespace</span>
<span class="sd">        :param delimiter: the character that should be used to split</span>
<span class="sd">            the name into parts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">StringValue</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_NO_NAME</span> <span class="k">if</span> <span class="n">is_blank</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="k">else</span> <span class="n">name</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_NO_NAME</span> <span class="k">if</span> <span class="n">is_blank</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">else</span> <span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">StringValue</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;event&#39; type is invalid! (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">get</span><span class="p">())</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;event&#39; type is invalid! (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="c1"># Split the namespace into it&#39;s individual parts</span>
        <span class="c1"># Convert to string is done to get value if</span>
        <span class="c1"># event is StringValue instead of str</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>

        <span class="c1"># Check if &#39;__callbacks&#39; is in event namespace</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_CB_KEY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parts</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_CB_KEY</span><span class="si">}</span><span class="s2">&#39; is not valid for an &quot;</span>
                <span class="s2">&quot;event or namespace level name!&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an iterator of the parts of this namespace.</span>

<span class="sd">        :return: an iterator of the parts of this namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parts</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the namespace name.</span>

<span class="sd">        :return: the namespace name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a code representation of this namespace.</span>

<span class="sd">        :return: a code representation of this namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">build_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if &#39;other&#39; equals this namespace.</span>

<span class="sd">        :param other: the object to check</span>
<span class="sd">        :return: True if &#39;other&#39; equals this namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the name of the namespace.</span>

<span class="sd">        :return: the name of the namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>


<span class="k">class</span> <span class="nc">_Handler</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple event handler class that wraps a function *func* for a</span>
<span class="sd">    specific *event* and that keeps track of the times left to handle.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Namespace</span><span class="p">],</span> <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_func</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span> <span class="o">=</span> <span class="n">namespace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span> <span class="o">=</span> <span class="n">ttl</span>

        <span class="c1"># store the registration time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a code representation of this handler.</span>

<span class="sd">        :return: a code representation of this handler</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">build_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the assigned function&#39;s name.</span>

<span class="sd">        :return: the assigned function&#39;s name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the assigned function.</span>

<span class="sd">        :return: the assigned function</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Namespace</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the event namespace.</span>

<span class="sd">        :return: the event namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ttl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Times To Listen (TTL) value.</span>

<span class="sd">        :return: the Times To Listen (TTL) value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span>

    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invokes the wrapped function when ttl is non-zero, decreases</span>
<span class="sd">        the ttl value when positive and returns whether it reached</span>
<span class="sd">        zero or not.</span>

<span class="sd">        :return: True if ttl value is zero</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ttl</span> <span class="o">==</span> <span class="mi">0</span>


<div class="viewcode-block" id="Branch"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch">[docs]</a><span class="k">class</span> <span class="nc">Branch</span><span class="p">(</span><span class="n">Logged</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents an event hierarchy branch.&quot;&quot;&quot;</span>

    <span class="n">_CB_KEY</span> <span class="o">=</span> <span class="s2">&quot;__callbacks&quot;</span>
    <span class="n">_WC_CHAR</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the Branch object.</span>

<span class="sd">        :param name: the name of the branch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_branch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">_Handler</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_CB_KEY</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_log_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New Branch Created: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a code representation of this branch.</span>

<span class="sd">        :return: a code representation of this branch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">build_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_new_branch</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a new branch. Essentially, a branch is just a</span>
<span class="sd">        dictionary with a special item *CB_KEY* that holds</span>
<span class="sd">        registered functions. All other items are used to</span>
<span class="sd">        build a tree structure.</span>

<span class="sd">        :return: a new empty branch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_CB_KEY</span><span class="p">:</span> <span class="p">[]}</span>

<div class="viewcode-block" id="Branch.clear_handlers"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.clear_handlers">[docs]</a>    <span class="k">def</span> <span class="nf">clear_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Branch</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears all existing handlers.</span>

<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Branch.get_handlers"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.get_handlers">[docs]</a>    <span class="k">def</span> <span class="nf">get_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">_Handler</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a surface copy list of all root handlers.</span>

<span class="sd">        :return: a surface copy list of all root handlers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Branch.add_handler"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.add_handler">[docs]</a>    <span class="k">def</span> <span class="nf">add_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">_Handler</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Branch</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the specified handler to the root list.</span>

<span class="sd">        NOTE: This method is only meant to be called by the</span>
<span class="sd">        event class internally.</span>

<span class="sd">        :param handler: the handler to add</span>
<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">caller</span> <span class="o">=</span> <span class="n">Caller</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">handler</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">caller</span><span class="o">.</span><span class="n">name_matches</span><span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="p">,</span> <span class="s2">&quot;on_any&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">caller</span><span class="o">.</span><span class="n">cls_name_matches</span><span class="p">(</span><span class="s2">&quot;Event&quot;</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EventError</span><span class="p">(</span><span class="s2">&quot;This method is meant to only be called&quot;</span> <span class="s2">&quot; internally!&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Branch.remove_handler"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.remove_handler">[docs]</a>    <span class="k">def</span> <span class="nf">remove_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a handler given by its function *func*.</span>

<span class="sd">        :param handler: the function to remove as handler</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">index</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">hdr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="p">)</span> <span class="k">if</span> <span class="n">hdr</span><span class="o">.</span><span class="n">func</span> <span class="o">==</span> <span class="n">handler</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indexes</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span></div>

<div class="viewcode-block" id="Branch.get_branches"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.get_branches">[docs]</a>    <span class="k">def</span> <span class="nf">get_branches</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Branch</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a surface copy list of all sub-branches.</span>

<span class="sd">        :return: a surface copy list of all sub-branches</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">branches</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Branch</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">branches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">branches</span></div>

<div class="viewcode-block" id="Branch.get_branch"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.get_branch">[docs]</a>    <span class="k">def</span> <span class="nf">get_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Branch</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the branch matching the specified name.</span>

<span class="sd">        :param name: the name of the branch</span>
<span class="sd">        :return: the branch matching the specified name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">[</span><span class="n">name</span><span class="p">]</span></div>

<div class="viewcode-block" id="Branch.add_branch"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.add_branch">[docs]</a>    <span class="k">def</span> <span class="nf">add_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Branch</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new sub-branch to this branch.</span>

<span class="sd">        :param name: the name of the branch</span>
<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Branch</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Branch.find_branch"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.find_branch">[docs]</a>    <span class="k">def</span> <span class="nf">find_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Branch</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a branch of the tree structure that matches *namespace*.</span>
<span class="sd">        Wildcards are not applied.</span>

<span class="sd">        :param namespace: the namespace to search</span>
<span class="sd">        :return: a branch of the tree structure that matches *namespace*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">branch</span><span class="p">:</span> <span class="n">Branch</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="k">if</span> <span class="n">is_not_blank</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">namespace</span><span class="p">:</span>
                <span class="n">branch</span> <span class="o">=</span> <span class="n">branch</span><span class="o">.</span><span class="n">get_branch</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">branch</span></div>

<div class="viewcode-block" id="Branch.get_namespace_branches"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.get_namespace_branches">[docs]</a>    <span class="k">def</span> <span class="nf">get_namespace_branches</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">wildcard</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Branch</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all branches that match the namespace parts</span>
<span class="sd">        and if wildcard is True then any wildcard branches are</span>
<span class="sd">        returned as well.</span>

<span class="sd">        :param namespace: the namespace to match</span>
<span class="sd">        :param wildcard: if True then any wildcard branches are</span>
<span class="sd">            returned as well</span>
<span class="sd">        :return: a list of the matching branches</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">branches</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_not_blank</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="c1"># Search through namespace parts and if they match branches</span>
            <span class="c1"># then add them to the list and if part is wildcard</span>
            <span class="c1"># and wildcard is enabled then add them too</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">namespace</span><span class="p">:</span>
                <span class="n">_branches</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">sub_branch</span> <span class="ow">in</span> <span class="n">branch</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_CB_KEY</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">part</span><span class="p">:</span>
                            <span class="n">_branches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_branch</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">wildcard</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_WC_CHAR</span> <span class="ow">in</span> <span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
                            <span class="n">_branches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_branch</span><span class="p">)</span>
                <span class="n">branches</span> <span class="o">=</span> <span class="n">_branches</span>

        <span class="k">return</span> <span class="n">branches</span></div>

<div class="viewcode-block" id="Branch.expand_namespace"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Branch.expand_namespace">[docs]</a>    <span class="k">def</span> <span class="nf">expand_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Branch</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loop through each part of namespace and create new branch</span>
<span class="sd">        for each part if it doesn&#39;t exist.</span>

<span class="sd">        :param namespace: the namespace to expand</span>
<span class="sd">        :return: the lowest branch in the namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="k">if</span> <span class="n">is_not_blank</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">namespace</span><span class="p">:</span>
                <span class="n">branch</span><span class="o">.</span><span class="n">add_branch</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
                <span class="n">branch</span> <span class="o">=</span> <span class="n">branch</span><span class="o">.</span><span class="n">get_branch</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">branch</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the root.</span>

<span class="sd">        :return: the root</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span></div>


<div class="viewcode-block" id="Event"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event">[docs]</a><span class="k">class</span> <span class="nc">Event</span><span class="p">(</span><span class="n">Logged</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An event is an object that, when fired, calls any added handler</span>
<span class="sd">    functions and passes them arguments.</span>

<span class="sd">    The user can specify an event signature upon inizializazion,</span>
<span class="sd">    defined by kwargs in the form of argumentname=class (e.g. num=int).</span>
<span class="sd">    The arguments&#39; types are checked and verified when a handler is added</span>
<span class="sd">    and when the event is fired. Callables with a matching signature can</span>
<span class="sd">    be added with &#39;+=&#39; or removed with &#39;-=&#39;. All handlers can be notified</span>
<span class="sd">    by calling &#39;Event.fire&#39; with correct arguments.</span>

<span class="sd">    &gt;&gt;&gt; event = Event(num=int, data=dict)</span>
<span class="sd">    &gt;&gt;&gt; event += lambda num, data: print(f&quot;{num} {data}&quot;)</span>
<span class="sd">    &gt;&gt;&gt; event.fire(num=5, data={&quot;foo&quot;: &quot;bar&quot;})</span>
<span class="sd">    5 {&#39;foo&#39;: &#39;bar&#39;}</span>

<span class="sd">    &gt;&gt;&gt; event = Event(num=int)</span>
<span class="sd">    &gt;&gt;&gt; event += lambda wrong_name: None</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">    EventHandlerMismatchError: Signature Mismatch</span>
<span class="sd">    (num=int) [Parameter #1 &#39;wrong_name&#39;]: Name should be &#39;num&#39;.</span>

<span class="sd">    &gt;&gt;&gt; event = Event(num=int)</span>
<span class="sd">    &gt;&gt;&gt; event += lambda num: None</span>
<span class="sd">    &gt;&gt;&gt; event.fire(wrong_name=0)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">    EventFireMismatchError: Signature Mismatch</span>
<span class="sd">    (num=int) [Parameter &#39;wrong_name&#39;]: Not Found</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_NEW_HANDLER</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="s2">&quot;new_handler&quot;</span><span class="p">)</span>
    <span class="n">_NO_NAME</span> <span class="o">=</span> <span class="s2">&quot;_NO_NAME&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">_wildcard</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">_new_handler</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">_max_handlers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">_delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Chars</span><span class="o">.</span><span class="n">DOT</span><span class="p">,</span>
        <span class="n">_signature</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span> <span class="o">|</span> <span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="n">Signature</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">_make_keyword_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="n">Parameter</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the Event object.</span>

<span class="sd">        NOTE: all parameter names start with an &#39;_&#39; to prevent the</span>
<span class="sd">        signature names from clashing if the signature needs to</span>
<span class="sd">        use the same names.</span>

<span class="sd">        NOTE: the &#39;_signature&#39; and &#39;kwargs&#39; can be used either or</span>
<span class="sd">        together, either way the result of both will be combined</span>
<span class="sd">        with the &#39;_signature&#39; values being added before the &#39;kwargs&#39;</span>
<span class="sd">        values. This allows for a predefined Signature object to be</span>
<span class="sd">        extended if needed.</span>

<span class="sd">        :param _wildcard: if True wildcards in event names are taken</span>
<span class="sd">            into account</span>
<span class="sd">        :param _new_handler: if True, a &#39;new_handler&#39; event is</span>
<span class="sd">            emitted every time a new handler is registered with</span>
<span class="sd">            arguments &#39;(handler, event=None)&#39;</span>
<span class="sd">        :param _max_handlers: the maximum number of event handlers.</span>
<span class="sd">            A negative number means that this number is unlimited.</span>
<span class="sd">        :param _delimiter: the character to separate each part of</span>
<span class="sd">            namespaces</span>
<span class="sd">        :param _signature: the parameter signature that all handlers</span>
<span class="sd">            are required to match and the signature that will be</span>
<span class="sd">            required to use when the event is fired.</span>
<span class="sd">        :param _make_keyword_only: if True all kwargs added parameters</span>
<span class="sd">            are added as &#39;Parameter.KEYWORD_ONLY&#39; instead of the</span>
<span class="sd">            default &#39;Parameter.POSITIONAL_OR_KEYWORD&#39;</span>
<span class="sd">        :param kwargs: the parameter signature that all handlers</span>
<span class="sd">            are required to match and the signature that will be</span>
<span class="sd">            required to use when the event is fired.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wildcard</span> <span class="o">=</span> <span class="n">_wildcard</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span> <span class="o">=</span> <span class="n">_delimiter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span> <span class="o">=</span> <span class="n">_new_handler</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span> <span class="o">=</span> <span class="n">_max_handlers</span>

        <span class="k">if</span> <span class="n">_signature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="n">_make_keyword_only</span><span class="o">=</span><span class="n">_make_keyword_only</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_signature</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span>
                <span class="n">_make_keyword_only</span><span class="o">=</span><span class="n">_make_keyword_only</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="n">_signature</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_signature</span><span class="p">,</span> <span class="n">Signature</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="o">=</span> <span class="n">_signature</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;signature&#39; type is invalid! (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">_signature</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler_signature</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">Callable</span><span class="p">,</span> <span class="n">evt</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">Branch</span><span class="p">(</span><span class="s2">&quot;ROOT&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string representation of the signature.</span>

<span class="sd">        :return: a string representation of the signature</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a code representation of this event.</span>

<span class="sd">        :return: a code representation of this event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wildcard</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;_wildcard&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wildcard</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;_new_handler&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;_max_handlers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span> <span class="o">!=</span> <span class="n">Chars</span><span class="o">.</span><span class="n">DOT</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;_delimiter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="n">default</span> <span class="o">=</span> <span class="s2">&quot;Parameter.empty&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">default</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">default</span>

                <span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;Parameter.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">kind</span><span class="p">)</span>

                <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">build_repr</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">,</span>
                    <span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                    <span class="n">kind</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span>
                    <span class="n">annotation</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">annotation</span><span class="o">.</span><span class="vm">__name__</span><span class="p">),</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">build_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a function to an un-named event.</span>

<span class="sd">        NOTE: type hinting on parameters is not required but,</span>
<span class="sd">        if used, is enforced to match the event signature.</span>

<span class="sd">        NOTE: handler can also be a collection of handlers</span>
<span class="sd">        or even a tuple (event += handler1, handler2).</span>

<span class="sd">        :param handler: the function to add as handler</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">iter</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">handler</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a function that is registered to the un-named event.</span>

<span class="sd">        NOTE: handler can also be a collection of handlers</span>
<span class="sd">        or even a tuple (event += handler1, handler2).</span>

<span class="sd">        :param handler: the function to add as handler. When *None*,</span>
<span class="sd">            decorator usage is assumed. Returns the function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">iter</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">off</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">handler</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">off</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a function to an event.</span>

<span class="sd">        NOTE: type hinting on parameters is not required but,</span>
<span class="sd">        if used, is enforced to match the event signature.</span>

<span class="sd">        NOTE: handler can also be a collection of handlers</span>
<span class="sd">        or even a tuple (event[&quot;namespace.event1&quot;] = handler1, handler2).</span>

<span class="sd">        :param key: the event to register</span>
<span class="sd">        :param value: the function to add as handler</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">iter</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes all handlers from the specified branch.</span>

<span class="sd">        :param key: the event namespace to clear</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">find_branch</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">off_branch</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current signature.</span>

<span class="sd">        :return: the current signature</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span>

<div class="viewcode-block" id="Event.set_signature"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.set_signature">[docs]</a>    <span class="k">def</span> <span class="nf">set_signature</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">_signature</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span> <span class="o">|</span> <span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="n">Signature</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">_make_keyword_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="n">Parameter</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the event signature.</span>

<span class="sd">        :param _make_keyword_only: if True all kwargs added parameters</span>
<span class="sd">            are added as &#39;Parameter.KEYWORD_ONLY&#39; instead of the</span>
<span class="sd">            default &#39;Parameter.POSITIONAL_OR_KEYWORD&#39;</span>
<span class="sd">        :param _signature: the parameter signature that all handlers</span>
<span class="sd">            are required to match and the signature that will be</span>
<span class="sd">            required to use when the event is fired.</span>
<span class="sd">        :param kwargs: the parameter signature that all handlers</span>
<span class="sd">            are required to match and the signature that will be</span>
<span class="sd">            required to use when the event is fired.</span>
<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">_signature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="n">_make_keyword_only</span><span class="o">=</span><span class="n">_make_keyword_only</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_signature</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span>
                <span class="n">_make_keyword_only</span><span class="o">=</span><span class="n">_make_keyword_only</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="n">_signature</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_signature</span><span class="p">,</span> <span class="n">Signature</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span> <span class="o">=</span> <span class="n">_signature</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;signature&#39; type is invalid! (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">_signature</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Event.is_wildcard_enabled"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.is_wildcard_enabled">[docs]</a>    <span class="k">def</span> <span class="nf">is_wildcard_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if wildcard is enabled.</span>

<span class="sd">        :return: True if wildcard is enabled</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wildcard</span></div>

<div class="viewcode-block" id="Event.enable_wildcard"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.enable_wildcard">[docs]</a>    <span class="k">def</span> <span class="nf">enable_wildcard</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enables wildcard.</span>

<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wildcard</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Event.disable_wildcard"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.disable_wildcard">[docs]</a>    <span class="k">def</span> <span class="nf">disable_wildcard</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables wildcard.</span>

<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wildcard</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">delimiter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the delimiter.</span>

<span class="sd">        :return: the delimiter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span>

    <span class="nd">@delimiter</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">delimiter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the delimiter.</span>

<span class="sd">        :param delimiter: the delimiter to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_delimiter</span> <span class="o">=</span> <span class="n">delimiter</span>

<div class="viewcode-block" id="Event.is_new_handler_enabled"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.is_new_handler_enabled">[docs]</a>    <span class="k">def</span> <span class="nf">is_new_handler_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if new handler is enabled.</span>

<span class="sd">        :return: True if new handler is enabled</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span></div>

<div class="viewcode-block" id="Event.enable_new_handler"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.enable_new_handler">[docs]</a>    <span class="k">def</span> <span class="nf">enable_new_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enables new_handler.</span>

<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Event.disable_new_handler"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.disable_new_handler">[docs]</a>    <span class="k">def</span> <span class="nf">disable_new_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables new_handler.</span>

<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the value of max_handlers.</span>

<span class="sd">        :return: the value of max_handlers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span>

    <span class="nd">@max_handlers</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">max_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_handlers</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of max_handlers.</span>

<span class="sd">        :param max_handlers: the value to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span> <span class="o">=</span> <span class="n">max_handlers</span>

    <span class="k">def</span> <span class="nf">_check_handler_length</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">,</span>
        <span class="n">requirement_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">exception</span><span class="p">,</span>
        <span class="n">signature</span><span class="p">:</span> <span class="n">Signature</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># Checks to see if there is fewer parameters than what is required</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">signature</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">signature</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">arg_error_text</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">requirement_name</span><span class="si">}</span><span class="s2"> must have at least &quot;</span> <span class="sa">f</span><span class="s2">&quot;1 </span><span class="si">{</span><span class="n">value_name</span><span class="si">}</span><span class="s2">:&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arg_error_text</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">requirement_name</span><span class="si">}</span><span class="s2"> must have at least &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">signature</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">value_name</span><span class="si">}</span><span class="s2">s:&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">arg_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;and instead has 0 </span><span class="si">{</span><span class="n">value_name</span><span class="si">}</span><span class="s2">s.&quot;</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">arg_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;and instead only has 1 </span><span class="si">{</span><span class="n">value_name</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arg_text</span> <span class="o">=</span> <span class="s2">&quot;and instead only has &quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">value_name</span><span class="si">}</span><span class="s2">s.&quot;</span>

            <span class="k">raise</span> <span class="n">exception</span><span class="p">(</span><span class="n">arg_error_text</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">) &quot;</span> <span class="o">+</span> <span class="n">arg_text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Signature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies if the specified handler matches the signature.</span>

<span class="sd">        :param handler: the handler to verify</span>
<span class="sd">        :param signature: the signature to match</span>
<span class="sd">        :raises EventHandlerMismatchError: if the handler doesn&#39;t match</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>

        <span class="c1"># Skip check if only param in handler is kwargs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="nb">list</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Parameter</span><span class="o">.</span><span class="n">VAR_KEYWORD</span>
        <span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_check_handler_length</span><span class="p">(</span>
                <span class="n">params</span><span class="p">,</span> <span class="s2">&quot;Handler&quot;</span><span class="p">,</span> <span class="s2">&quot;parameter&quot;</span><span class="p">,</span> <span class="n">EventHandlerMismatchError</span><span class="p">,</span> <span class="n">signature</span>
            <span class="p">)</span>

            <span class="n">index_offset</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="c1"># Loops through all the parameters to see if they match the signature</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">arg_error_text</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Signature Mismatch &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">) &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;[Parameter #</span><span class="si">{</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]: &quot;</span>
                <span class="p">)</span>

                <span class="n">mod_index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="n">index_offset</span>

                <span class="c1"># Checks if this parameter can be assigned by a keyword argument</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="n">param</span><span class="o">.</span><span class="n">POSITIONAL_ONLY</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">EventHandlerMismatchError</span><span class="p">(</span>
                        <span class="n">arg_error_text</span> <span class="o">+</span> <span class="s2">&quot;Cannot be assigned with keyword argument!&quot;</span>
                    <span class="p">)</span>

                <span class="c1"># Checks if the current param a *args</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="n">param</span><span class="o">.</span><span class="n">VAR_POSITIONAL</span><span class="p">:</span>
                    <span class="c1"># Checks if any params exist after *args</span>
                    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">EventHandlerMismatchError</span><span class="p">(</span>
                            <span class="n">arg_error_text</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;No match after &#39;</span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                            <span class="s2">&quot; that can be assigned with keyword &quot;</span>
                            <span class="s2">&quot;argument!&quot;</span>
                        <span class="p">)</span>

                    <span class="n">index_offset</span> <span class="o">-=</span> <span class="mi">1</span>

                <span class="c1"># Skip if the current param is a **kwargs</span>
                <span class="k">elif</span> <span class="n">param</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="n">param</span><span class="o">.</span><span class="n">VAR_KEYWORD</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="c1"># Checks if this is an additional parameter beyond signature requirement</span>
                <span class="k">elif</span> <span class="n">mod_index</span> <span class="o">&gt;</span> <span class="n">signature</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># Checks if this additional parameter has a default value</span>
                    <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="n">param</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">EventHandlerMismatchError</span><span class="p">(</span>
                            <span class="n">arg_error_text</span> <span class="o">+</span> <span class="s2">&quot;No Default Value!&quot;</span>
                        <span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_warning</span><span class="p">(</span><span class="n">arg_error_text</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Default Value - &#39;</span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">default</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

                <span class="c1"># Checks if this parameter has the correct name</span>
                <span class="k">elif</span> <span class="n">param</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">signature</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="n">mod_index</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="n">EventHandlerMismatchError</span><span class="p">(</span>
                        <span class="n">arg_error_text</span> <span class="o">+</span> <span class="s2">&quot;Name should be &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">signature</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="n">mod_index</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                    <span class="p">)</span>

                <span class="c1"># Checks if this parameter has the correct type</span>
                <span class="k">elif</span> <span class="n">param</span><span class="o">.</span><span class="n">annotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="n">param_type</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">annotation</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_subclass</span><span class="p">(</span><span class="n">param_type</span><span class="p">,</span> <span class="n">signature</span><span class="o">.</span><span class="n">types</span><span class="p">[</span><span class="n">mod_index</span><span class="p">]):</span>
                        <span class="k">raise</span> <span class="n">EventHandlerMismatchError</span><span class="p">(</span>
                            <span class="n">arg_error_text</span> <span class="o">+</span> <span class="s2">&quot;Type should be &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="o">.</span><span class="n">types</span><span class="p">[</span><span class="n">mod_index</span><span class="p">])</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;not </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">param_type</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
                        <span class="p">)</span>

        <span class="k">return</span> <span class="n">handler</span>

<div class="viewcode-block" id="Event.on"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.on">[docs]</a>    <span class="k">def</span> <span class="nf">on</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a function to an event.</span>

<span class="sd">        NOTE: type hinting on parameters is not required but,</span>
<span class="sd">        if used, is enforced to match the event signature.</span>

<span class="sd">        :param event: the event to register</span>
<span class="sd">        :param handler: the function to add as handler. When *None*,</span>
<span class="sd">            decorator usage is assumed. Returns the function.</span>
<span class="sd">        :param ttl: the amount of times to listen. Negative values mean</span>
<span class="sd">            infinity.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">on</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The internal *on* function.</span>

<span class="sd">            :param func: the function to add as handler</span>
<span class="sd">            :return: the function</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># if func is not callable or None, ignore</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">func</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">):</span>
                <span class="n">namespace</span> <span class="o">=</span> <span class="n">event</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">namespace</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">namespace</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_NEW_HANDLER</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_verify_handler</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler_signature</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_verify_handler</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span><span class="p">)</span>

            <span class="c1"># Grab current root branch and create</span>
            <span class="c1"># new branches if they don&#39;t exist</span>
            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">expand_namespace</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>

            <span class="c1"># Grab the list of handlers in the lowest level branch in</span>
            <span class="c1"># the namespace</span>
            <span class="n">handlers</span> <span class="o">=</span> <span class="n">branch</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">()</span>

            <span class="c1"># If max handlers isn&#39;t disabled (-1)</span>
            <span class="c1"># then check if handlers has exceeded max handlers</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">handlers</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_warning</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot add &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">Func</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">full_name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;as handler to &#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; event, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Max handlers (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span><span class="si">}</span><span class="s2">) &quot;</span>
                    <span class="s2">&quot;has been exceeded!&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">func</span>

            <span class="c1"># Create a new handler and append it to the list</span>
            <span class="n">new_handler</span> <span class="o">=</span> <span class="n">_Handler</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">ttl</span><span class="p">)</span>
            <span class="n">branch</span><span class="o">.</span><span class="n">add_handler</span><span class="p">(</span><span class="n">new_handler</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New handler &#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; added for event &#39;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">&#39;!&quot;</span><span class="p">)</span>

            <span class="c1"># If new_handler is enabled then emit new_handler event</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fire</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_NEW_HANDLER</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">func</span><span class="p">,</span> <span class="n">evt</span><span class="o">=</span><span class="n">namespace</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">func</span>

        <span class="k">return</span> <span class="n">on</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="k">if</span> <span class="n">handler</span> <span class="k">else</span> <span class="n">on</span></div>

<div class="viewcode-block" id="Event.on_new_handler"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.on_new_handler">[docs]</a>    <span class="k">def</span> <span class="nf">on_new_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a function to the &#39;new_handler&#39; event.</span>

<span class="sd">        NOTE: type hinting on parameters is not required but,</span>
<span class="sd">        if used, is enforced to match the event signature.</span>

<span class="sd">        :param handler: the function to add as handler</span>
<span class="sd">        :param ttl: the amount of times to listen. Negative values mean</span>
<span class="sd">            infinity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_NEW_HANDLER</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">ttl</span><span class="p">)</span></div>

<div class="viewcode-block" id="Event.once"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.once">[docs]</a>    <span class="k">def</span> <span class="nf">once</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a function to an event that is called once.</span>

<span class="sd">        NOTE: type hinting on parameters is not required but,</span>
<span class="sd">        if used, is enforced to match the event signature.</span>

<span class="sd">        :param event: the event to register</span>
<span class="sd">        :param handler: the function to add as handler. When *None*,</span>
<span class="sd">            decorator usage is assumed. Returns the function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Event.on_any"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.on_any">[docs]</a>    <span class="k">def</span> <span class="nf">on_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a function that is called every time an event is emitted.</span>

<span class="sd">        NOTE: type hinting on parameters is not required but,</span>
<span class="sd">        if used, is enforced to match the event signature.</span>

<span class="sd">        :param handler: the function to add as handler. When *None*,</span>
<span class="sd">            decorator usage is assumed. Returns the function.</span>
<span class="sd">        :param ttl: the amount of times to listen. Negative values mean</span>
<span class="sd">            infinity.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">on_any</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The internal *on any* function.</span>

<span class="sd">            :param func: the function to add as handler</span>
<span class="sd">            :return: the function</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># if func is not callable or None, ignore</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">func</span>

            <span class="c1"># Grab the list of handlers in the root branch</span>
            <span class="n">handlers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">()</span>

            <span class="c1"># If max handlers isn&#39;t disabled (-1)</span>
            <span class="c1"># then check if handlers has exceeded max handlers</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_handlers</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">handlers</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">func</span>

            <span class="c1"># Create a new handler and append it to the list</span>
            <span class="n">new_handler</span> <span class="o">=</span> <span class="n">_Handler</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ttl</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">add_handler</span><span class="p">(</span><span class="n">new_handler</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New handler &#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; added for &#39;on_any&#39;!&quot;</span><span class="p">)</span>

            <span class="c1"># If new_handler is enabled then emit new_handler event</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fire</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_NEW_HANDLER</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">func</span><span class="p">,</span> <span class="n">evt</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">func</span>

        <span class="k">return</span> <span class="n">on_any</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="k">if</span> <span class="n">handler</span> <span class="k">else</span> <span class="n">on_any</span></div>

<div class="viewcode-block" id="Event.off"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.off">[docs]</a>    <span class="k">def</span> <span class="nf">off</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a function that is registered to an event.</span>

<span class="sd">        :param event: the event to de-register</span>
<span class="sd">        :param handler: the function to add as handler. When *None*,</span>
<span class="sd">            decorator usage is assumed. Returns the function.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">off</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The internal *off* function.</span>

<span class="sd">            :param func: the function to remove as handler</span>
<span class="sd">            :return: the function</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">):</span>
                <span class="n">namespace</span> <span class="o">=</span> <span class="n">event</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">namespace</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

            <span class="c1"># Grab the lowest level branch in the namespace</span>
            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">find_branch</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>

            <span class="c1"># If the branch doesn&#39;t exist, ignore</span>
            <span class="k">if</span> <span class="n">branch</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_warning</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot remove &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">Func</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">full_name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;handler from &#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; event, &quot;</span>
                    <span class="s2">&quot;Event doesn&#39;t exist!&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">func</span>

            <span class="n">branch</span><span class="o">.</span><span class="n">remove_handler</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Removed handler &#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; from event &#39;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">&#39;!&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">func</span>

        <span class="k">return</span> <span class="n">off</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="k">if</span> <span class="n">handler</span> <span class="k">else</span> <span class="n">off</span></div>

<div class="viewcode-block" id="Event.off_any"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.off_any">[docs]</a>    <span class="k">def</span> <span class="nf">off_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a function that was registered via &#39;on_any&#39;.</span>

<span class="sd">        :param handler: the function to add as handler. When *None*,</span>
<span class="sd">            decorator usage is assumed. Returns the function.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">off_any</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The internal *off any* function.</span>

<span class="sd">            :param func: the function to remove as handler</span>
<span class="sd">            :return: the function</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">remove_handler</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="s2">&quot;Removed all &#39;on_any&#39; event handlers!&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">func</span>

        <span class="k">return</span> <span class="n">off_any</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="k">if</span> <span class="n">handler</span> <span class="k">else</span> <span class="n">off_any</span></div>

<div class="viewcode-block" id="Event.off_branch"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.off_branch">[docs]</a>    <span class="k">def</span> <span class="nf">off_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes all handlers from the specified branch.</span>

<span class="sd">        :param event: the event namespace to clear</span>
<span class="sd">        :return: this instance for use in method chaining</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">find_branch</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">branch</span><span class="p">:</span>
            <span class="n">branch</span><span class="o">.</span><span class="n">clear_handlers</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Event.off_all"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.off_all">[docs]</a>    <span class="k">def</span> <span class="nf">off_all</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes all registered functions.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">Branch</span><span class="p">(</span><span class="s2">&quot;ROOT&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="s2">&quot;Removed all event handlers!&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Event.handlers"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.handlers">[docs]</a>    <span class="k">def</span> <span class="nf">handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all functions that are registered to an event.</span>
<span class="sd">        Wildcards are not applied.</span>

<span class="sd">        :param event: the event to lookup</span>
<span class="sd">        :return: all functions that are registered to an event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">):</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="n">event</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="c1"># Grab the lowest level branch in the namespace</span>
        <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">find_branch</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>

        <span class="c1"># If the branch doesn&#39;t exist, return empty list</span>
        <span class="k">if</span> <span class="n">branch</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">handler</span><span class="o">.</span><span class="n">func</span> <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">branch</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Event.handlers_any"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.handlers_any">[docs]</a>    <span class="k">def</span> <span class="nf">handlers_any</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all functions that were registered using &#39;on_any&#39;.</span>

<span class="sd">        :return: all functions that were registered using &#39;on_any&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">handler</span><span class="o">.</span><span class="n">func</span> <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Event.handlers_all"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.handlers_all">[docs]</a>    <span class="k">def</span> <span class="nf">handlers_all</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all registered functions.</span>

<span class="sd">        :return: all registered functions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Grab the list of handlers in the root branch</span>
        <span class="n">handlers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">()</span>

        <span class="c1"># Grab the list of all branches</span>
        <span class="n">branches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">get_branches</span><span class="p">()</span>

        <span class="c1"># Look for handlers in any sub-branches</span>
        <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
            <span class="c1"># If more sub-branches found add to list</span>
            <span class="n">branches</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">branch</span><span class="o">.</span><span class="n">get_branches</span><span class="p">())</span>

            <span class="c1"># If handlers found add to list</span>
            <span class="n">handlers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">branch</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">())</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">handler</span><span class="o">.</span><span class="n">func</span> <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">]</span></div>

<div class="viewcode-block" id="Event.fire"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.fire">[docs]</a>    <span class="k">def</span> <span class="nf">fire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fires an *event*. All functions of events that match *event*</span>
<span class="sd">        are invoked with *kwargs* in the exact order of</span>
<span class="sd">        their registration. Wildcards might be applied.</span>

<span class="sd">        :param event: the event to fire</span>
<span class="sd">        :param kwargs: keyword args to pass to handlers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fire</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Event.fire_reverse"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.fire_reverse">[docs]</a>    <span class="k">def</span> <span class="nf">fire_reverse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fires an *event*. All functions of events that match *event*</span>
<span class="sd">        are invoked with *kwargs* in the reverse order of</span>
<span class="sd">        their registration. Wildcards might be applied.</span>

<span class="sd">        :param event: the event to fire</span>
<span class="sd">        :param kwargs: keyword args to pass to handlers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fire</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_fire</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringValue</span> <span class="o">|</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="c1"># Grab the list of handlers in the root branch</span>
        <span class="n">handlers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">):</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="n">event</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">namespace</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_NEW_HANDLER</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_new_handler_signature</span><span class="o">.</span><span class="n">verify_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signature</span><span class="o">.</span><span class="n">verify_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Grab the list of branches</span>
        <span class="n">branches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">get_namespace_branches</span><span class="p">(</span>
            <span class="n">namespace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_wildcard_enabled</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Add all handlers from found branches to the list</span>
        <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
            <span class="n">handlers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">branch</span><span class="o">.</span><span class="n">get_handlers</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Firing event &#39;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">&#39; in reverse order!&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Firing event &#39;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">&#39;!&quot;</span><span class="p">)</span>

        <span class="c1"># Call handlers in the order of their registration time</span>
        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">handlers</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">hdr</span><span class="p">:</span> <span class="n">hdr</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">):</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">handle</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Remove handlers whose ttl value is 0</span>
        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">handler</span><span class="o">.</span><span class="n">ttl</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">off</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">handler</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="o">.</span><span class="n">func</span><span class="p">)</span>

<div class="viewcode-block" id="Event.copy"><a class="viewcode-back" href="../../pystdlib.html#pystdlib.event.Event.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Event</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a copy of this event with a new root branch.</span>

<span class="sd">        :return: a copy of this event with a new root branch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">())</span></div></div>
</pre></div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By JWCompDev<br/>
    
        &copy; Copyright 2022, JWCompDev.<br/>
      Last updated on Mar 12, 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>